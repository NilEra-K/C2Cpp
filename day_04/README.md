# Day 04

**面向对象**
- 什么是面向对象——WHAT?
    - 万物皆对象
    - 把大型软件看作是由多个对象组成的团队
    - 对象拥有足够的智能, 能够理解来自其他对象的信息, 并以适当的行为作出反映
    - 对象能够从高层对象继承属性和行为, 并允许低层对象对自己继承属性和行为
    - 面向对象的三大要件: 封装、继承和多态
- 为什么要面向对象——WHY?
    - 相较于分而治之的结构化程序设计, 强调于大处着眼的面向对象程序设计思想, 更适合于开发大型软件
    - 得益于代码复用等面喜爱嗯对象的固有特征, 软件开发的效率获得极大的提升, 成本却大幅降低
    - 面向对象技术的表现如此出众, 以至于那些原本并不直接支持面向对象特性的语言(例如: C), 也在越来越多的通过各种方法模拟一些面向对象的软件结构
- 怎样面向对象——HOW?
    - 至少掌握一种面向对象的程序设计语言, 如 Java、C++
    - 深入理解封装、继承和多态等面向对象的重要概念
    - 学习设计模式, 源自多年成
    功经验的积累和总结

**类和对象**
- 类是抽象事物的一套规则
- 类式一种用户自定义的复合数据类型, 既包括表达属性的成员变量, 也包括表达行为的成员函数
- 类可用于表达那些不能直接与内置基本类型建立自然映射关系的逻辑抽象
- 类是现实世界的抽象, 对象是类在虚拟世界的实例

**类的定义**
- **[补充] 定义 xx 实际上就是给 xx 分配内存**
- 类的一般形式
```
class/struct 类名 :继承方式 基类, ...{
访问控制限定符:
    // 构造函数
    类名(形参表) :成员变量(初值),...{
        函数体;
    }
    
    // 析构函数
    ~类名(void){
        函数体;
    }

    // 成员函数
    返回类型 函数名(形参表) 常属性 异常说明{
        函数体;
    }

    // 成员变量
    数据类型 变量名;
};
```
- 访问控制限定符
    - `public` 共有成员, 谁都可以访问
    - `protected` 保护成员, 只有自己和子类可以访问
    - `private` 私有成员, 只有自己可以访问
    - 当使用 `struct` 时, 其实就是一个 `public` 权限的类
    - 当使用 `class` 时, 若不指定访问控制限定符, 则默认为 `private` 权限
    - 访问控制限定符仅作用于类, 而非作用于对象
    - 对不同成员的访问控制属性加以区分, 体现了 C++ 作为面向对象程序设计语言的**封装**特性

**This指针(成员函数参数——this)**
- C++ 对象类型
    - 同一个类的不同对象各自拥有一份独立的成员变量
    - 用一个类的不同对象彼此共享同一份成员函数
    - 那么在代码区中, 被同一个类的不同对象所共享的成员函数, 在这些成员函数内部, 如何区分其所访问的成员变量隶属于哪个对象
- **this指针**
    - 类的每个成员函数(除静态成员函数外), 都有一个隐藏的指针型参数, 形参名为 `this` , 指向调用该成员函数的对象, 这就是 this 指针
    - 在类的成员函数中(除静态成员函数外), 对所有成员的访问, 都是通过 this 指针进行的
    - 哪个对象调用成员函数, 成员函数的 this 指针就指向哪个对象
    - 在成员函数的内部, 编译器一旦发现访问了成员变量, 会自动补充 this
- **this指针的应用**
    - 大多数情况下, 程序并不需要显式的使用 this 指针
    - 有时为了方便, 将类的成员变量与该类成员函数的参数取相同的标识符, 这时在成员函数内部, 可通过 this 指针将二者加以区分
    - 返回基于 this 指针的自引用, 以支持**串连调用**
    - 将 this 指针作为函数的参数, 以实现**对象交互**

**常对象**
- 被 `const` 关键字修饰的对象、对象指针或对象引用, 统称为常对象
    - `const User user;`
    - `const User* cptr = &user;`
    - `const User& cref = user;`

**常函数**
- 在类成员函数的形参表之后, 函数体之前加上 `const` 关键字, 该成员函数的 this 指针即具有常属性, 这样的成员函数被称之为**常函数**
    ```
    class 类名{
        返回类型 函数名 (形参表) const{
            函数体;
        }
    };
    ```

**常函数和常对象**
- 原型相同的成员函数, 常版本和非常版本构成重载关系
    - 非常对象优先选择非常版本, 如果没有非常版本, 也能选择常版本
    - 常对象只能选择常版本
- 在常函数内部无法修改成员变量的值, 除非该成员变量被 `mutable` 关键字修饰
- 在未使用任何手段去掉常属性的情况下, 常函数只能调用常函数, 不能调用非常函数





